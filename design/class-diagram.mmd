<!--
Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>
This software is licensed under the MIT License.
File: /Users/martinbechard/dev/mcp-dev-prompter/design/class-diagram.mmd
This was generated by Claude Sonnet 3.5, with the assistance of my human mentor

Class diagram showing the relationships between major components
Where prompt templates find their home!
-->

classDiagram
    class DevPrompterServer {
        -server: Server
        -templateLoader: TemplateLoader
        -promptGenerator: PromptGenerator
        -availablePrompts: Map<string, LoadedTemplate>
        +constructor()
        -loadTemplates()
        -setupHandlers()
        +initialize()
        +getServer()
    }

    class TemplateLoader {
        -templateCache: Map<string, LoadedTemplate>
        +loadTemplate(name: string)
        -parseTemplate(content: string)
        -validateTemplate(template: LoadedTemplate)
        +refreshCache()
    }

    class PromptGenerator {
        -templateLoader: TemplateLoader
        +generatePrompt(templateId: string, args: Record<string, unknown>)
        -processTemplate(content: string, args: Record<string, unknown>)
    }

    class LoadedTemplate {
        +id: string
        +metadata: TemplateMetadata
        +sections: TemplateSections
        +rawContent: string
    }

    class TemplateMetadata {
        +description: string
        +version: string
        +arguments: TemplateArgument[]
    }

    class TemplateArgument {
        +name: string
        +description: string
        +required: boolean
    }

    class TemplateSections {
        +title: string
        +description: string
        +template: string
    }

    DevPrompterServer -- TemplateLoader : uses
    DevPrompterServer -- PromptGenerator : uses
    DevPrompterServer -- LoadedTemplate : manages
    TemplateLoader -- LoadedTemplate : loads
    LoadedTemplate -- TemplateMetadata : contains
    LoadedTemplate -- TemplateSections : contains
    TemplateMetadata -- TemplateArgument : contains
    PromptGenerator -- LoadedTemplate : processes